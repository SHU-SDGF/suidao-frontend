<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
    <title>ADN - Autodesk Forge Viewer Node.js Extractor example (local view)</title>
    <meta content="ADN - Autodesk Forge Viewer Node.js Extractor example" name="description" />
    <meta content="Extractor Node.js Forge Viewer" name="keywords" />
    <meta content="Autodesk" name="author" />

    <meta http-equiv="cache-control" content="max-age=0" />
    <meta http-equiv="cache-control" content="no-cache" />
    <meta http-equiv="expires" content="0" />
    <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
    <meta http-equiv="pragma" content="no-cache" />

    <!-- External libraries -->
    <script src="/build/js/vendor.bundle.js"></script>
    <script src="/build/js/bin.bundle.js"></script>
    <link href="/build/css/app.md.css" rel="stylesheet" />

    <!-- Our scripts -->
    <style>
        div#viewer { width: 100%; height: 100%; cursor: pointer; padding: 0px; overflow: hidden;
            background-color: #eee;}
        
    </style>

    <script>
        var docs =
            [{"path":"../../../Resource/____/_3D_/_3D_.svf","name":"{3D}"}]
        ;

        var oViewer =null ;
        $(document).ready (function () {
            //var options ={ 'document': '', 'env': 'AutodeskProduction' } ;
            var options ={ 'docid': docs [0].path, env: '' } ;

            //oViewer =new Autodesk.Viewing.Viewer3D ($("#viewer") [0], {}) ; // No toolbar
            oViewer =new Autodesk.Viewing.Private.GuiViewer3D ($("#viewer") [0], {}) ; // With toolbar
            Autodesk.Viewing.Initializer (options, function () {
				oViewer.initialize () ;
                oViewer.addEventListener (Autodesk.Viewing.GEOMETRY_LOADED_EVENT, function (event) {
                    //oViewer.removeEventListener (Autodesk.Viewing.GEOMETRY_LOADED_EVENT, arguments.callee) ;
                    oViewer.fitToView (true) ;
                    setTimeout (function () { oViewer.autocam.setHomeViewFrom (oViewer.navigation.getCamera ()) ; }, 1000) ;
                }) ;
				oViewer.load (options.docid) ;

				for ( var i =0 ; i < docs.length ; i++ ) {
					$('#view_' + i).click (function (e) {
						e.stopPropagation () ;
                        //oViewer.impl.unloadCurrentModel () ;
                        // API would be tearDown()/setUp()
                        // tearDown() unloads extensions too, so you need setUp() after that to load again
                        // setUp() requires the viewer configuration again, the one you use to start the viewer.
                        oViewer.tearDown () ;
                        oViewer.setUp ({ env: '' }) ;
						var i =parseInt (e.target.id.substring (5)) ;
						oViewer.load (docs [i].path) ;
					}) ;
				}
			}) ;
        }) ;
    </script>
</head>

<body>
    <div id="viewer" class="left"></div>
</body>
</html>
